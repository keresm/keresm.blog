{"version":3,"file":"static_js_components_TagSelect_vue.js","mappings":";;;;;;;;;;;;;;;;AAAwF;AAC3B;AACL;;;AAGxD;AACA,CAA6F;AAC7F,gBAAgB,uGAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACA,iEAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsB4B;;;AAG3C,iEAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gBAAgB,uDAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;;;;;;;;;AC1L6H,CAAC,iEAAe,uIAAG,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEAnJ;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,6BAA6B;AACnC;AACA;AACA,iBAAiB,8BAA8B;AAC/C,oBAAoB,sBAAsB;AAC1C,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,cAAc,sDAAsD;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,mDAAmD;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,iDAAiD;AAC/E,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACrIA;;AAEA;AACA;AACA;;AAEe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","sources":["webpack://Club/./static/js/components/TagSelect.vue","webpack://Club/static/js/components/TagSelect.vue","webpack://Club/./static/js/components/TagSelect.vue?9c08","webpack://Club/./static/js/components/TagSelect.vue?f0f3","webpack://Club/./static/js/components/TagSelect.vue?5a40","webpack://Club/./node_modules/vue-loader/lib/runtime/componentNormalizer.js"],"sourcesContent":["import { render, staticRenderFns } from \"./TagSelect.vue?vue&type=template&id=5521d5d0&\"\nimport script from \"./TagSelect.vue?vue&type=script&lang=js&\"\nexport * from \"./TagSelect.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/app/frontend/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('5521d5d0')) {\n      api.createRecord('5521d5d0', component.options)\n    } else {\n      api.reload('5521d5d0', component.options)\n    }\n    module.hot.accept(\"./TagSelect.vue?vue&type=template&id=5521d5d0&\", function () {\n      api.rerender('5521d5d0', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"static/js/components/TagSelect.vue\"\nexport default component.exports","<template>\n    <div class=\"input-select\">\n        <input type=\"hidden\" :value=\"formValue\" :name=\"id\" />\n        <v-select\n            :taggable=\"allowCreateNew\"\n            :multiple=\"allowMultiple\"\n\n            label=\"title\"\n            placeholder=\"\"\n\n            v-model=\"selectValue\"\n\n            :options=\"options\"\n            :selectable=\"canSelect\"\n\n            @input=\"onSelectValueChange\"\n            @search=\"onSearch\"\n        >\n            <template #no-options=\"{ search, searching, loading }\">\n                <template v-if=\"!searching || search.length < 3\">\n                    Начните набирать текст для поиска...\n                </template>\n                <template v-else>\n                    Ничего не найдено\n                </template>\n            </template>\n\n            <template #option=\"{ title, isExist }\">\n                <span>\n                    <template v-if=\"!isExist\">{{ labelPrefixInput }}</template>\n                    {{ title }}\n                </span>\n                <br>\n                <template v-if=\"!isExist\">\n                    <span class=\"vs__dropdown-option-secondary-text\">\n                        <template v-if=\"!isValidInput\">\n                            {{ labelInvalidInput }}\n                        </template>\n                        <template v-else>\n                            {{ labelValidInput }}\n                        </template>\n                    </span>\n                </template>\n            </template>\n\n\n            <template #search=\"{attributes, events}\">\n                <input\n                    class=\"vs__search\"\n                    @input=\"onInputChange\"\n                    @blur=\"onInputBlur\"\n                    v-bind=\"attributes\"\n                    v-on=\"events\"\n                />\n            </template>\n        </v-select>\n    </div>\n</template>\n\n<script>\nimport { debounce } from \"../common/utils\";\n\n\nexport default {\n    props: {\n        id: {\n            type: String,\n            required: true,\n        },\n        initialValue: {\n            type: String,\n            required: false,\n        },\n        allowCreateNew: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n        allowMultiple: {\n            type: Boolean,\n            required: false,\n            default: false,\n        },\n        validationRegExp: {\n            type: String,\n            required: false,\n            default: null,\n        },\n        searchUrl: {\n            type: String,\n            required: true,\n        },\n        labelValidInput: String,\n        labelInvalidInput: String,\n        labelPrefixInput: String,\n    },\n    mounted() {\n        if (this.$props.initialValue) {\n            this.selectValue = {\n                title: this.initialValue,\n                isExist: true,\n            }\n            this.formValue = this.initialValue;\n        }\n    },\n    data() {\n        return {\n            isValidInput: false,\n            selectValue: null,\n            formValue: null,\n            options: [],\n        };\n    },\n    computed: {\n        validationRe() {\n            if (!this.validationRegExp) {\n                return null;\n            }\n\n            return new RegExp(this.validationRegExp);\n        }\n    },\n    methods: {\n        canSelect(option) {\n            return option.isExist || this.isValidInput;\n        },\n\n        onInputChange(event) {\n            if (!this.validationRe) {\n                this.isValidInput = true;\n                return;\n            }\n\n            if (this.validationRe.test(event.target.value)) {\n                this.isValidInput = true;\n                return;\n            }\n\n            this.isValidInput = false;\n        },\n\n        onInputBlur(event) {\n            // clear old search results\n            this.options = [];\n        },\n\n        onSearch(search, loading) {\n            if (search.length >= 3) {\n                loading(true);\n                this.search(loading, search, this);\n                return;\n            }\n\n            this.options = [];\n        },\n\n        search: debounce(((loading, search, vm) => {\n            fetch(`${vm.$props.searchUrl}${search}`)\n                .then(response => response.json())\n                .then(json => {\n                    if (!json.tags) {\n                        return;\n                    }\n                    vm.options = json.tags\n                        .map(tag => ({\n                            title: tag.name,\n                            isExist: true,\n                        }))\n                    ;\n                })\n                .finally(() => {\n                    loading(false);\n                });\n\n        }), 500),\n\n        // value changed at item in dropdown\n        onSelectValueChange(option) {\n            if (!option) {\n                this.formValue = null;\n                return;\n            }\n\n            this.formValue = option.title || option;\n        }\n    },\n};\n</script>\n","import mod from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagSelect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagSelect.vue?vue&type=script&lang=js&\"","export * from \"-!../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TagSelect.vue?vue&type=template&id=5521d5d0&\"","var render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"input-select\" },\n    [\n      _c(\"input\", {\n        attrs: { type: \"hidden\", name: _vm.id },\n        domProps: { value: _vm.formValue },\n      }),\n      _vm._v(\" \"),\n      _c(\"v-select\", {\n        attrs: {\n          taggable: _vm.allowCreateNew,\n          multiple: _vm.allowMultiple,\n          label: \"title\",\n          placeholder: \"\",\n          options: _vm.options,\n          selectable: _vm.canSelect,\n        },\n        on: { input: _vm.onSelectValueChange, search: _vm.onSearch },\n        scopedSlots: _vm._u([\n          {\n            key: \"no-options\",\n            fn: function (ref) {\n              var search = ref.search\n              var searching = ref.searching\n              var loading = ref.loading\n              return [\n                !searching || search.length < 3\n                  ? [\n                      _vm._v(\n                        \"\\n                Начните набирать текст для поиска...\\n            \"\n                      ),\n                    ]\n                  : [\n                      _vm._v(\n                        \"\\n                Ничего не найдено\\n            \"\n                      ),\n                    ],\n              ]\n            },\n          },\n          {\n            key: \"option\",\n            fn: function (ref) {\n              var title = ref.title\n              var isExist = ref.isExist\n              return [\n                _c(\n                  \"span\",\n                  [\n                    !isExist\n                      ? [_vm._v(_vm._s(_vm.labelPrefixInput))]\n                      : _vm._e(),\n                    _vm._v(\n                      \"\\n                \" + _vm._s(title) + \"\\n            \"\n                    ),\n                  ],\n                  2\n                ),\n                _vm._v(\" \"),\n                _c(\"br\"),\n                _vm._v(\" \"),\n                !isExist\n                  ? [\n                      _c(\n                        \"span\",\n                        { staticClass: \"vs__dropdown-option-secondary-text\" },\n                        [\n                          !_vm.isValidInput\n                            ? [\n                                _vm._v(\n                                  \"\\n                        \" +\n                                    _vm._s(_vm.labelInvalidInput) +\n                                    \"\\n                    \"\n                                ),\n                              ]\n                            : [\n                                _vm._v(\n                                  \"\\n                        \" +\n                                    _vm._s(_vm.labelValidInput) +\n                                    \"\\n                    \"\n                                ),\n                              ],\n                        ],\n                        2\n                      ),\n                    ]\n                  : _vm._e(),\n              ]\n            },\n          },\n          {\n            key: \"search\",\n            fn: function (ref) {\n              var attributes = ref.attributes\n              var events = ref.events\n              return [\n                _c(\n                  \"input\",\n                  _vm._g(\n                    _vm._b(\n                      {\n                        staticClass: \"vs__search\",\n                        on: { input: _vm.onInputChange, blur: _vm.onInputBlur },\n                      },\n                      \"input\",\n                      attributes,\n                      false\n                    ),\n                    events\n                  )\n                ),\n              ]\n            },\n          },\n        ]),\n        model: {\n          value: _vm.selectValue,\n          callback: function ($$v) {\n            _vm.selectValue = $$v\n          },\n          expression: \"selectValue\",\n        },\n      }),\n    ],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","/* globals __VUE_SSR_CONTEXT__ */\n\n// IMPORTANT: Do NOT use ES2015 features in this file (except for modules).\n// This module is a runtime utility for cleaner component module output and will\n// be included in the final webpack user bundle.\n\nexport default function normalizeComponent(\n  scriptExports,\n  render,\n  staticRenderFns,\n  functionalTemplate,\n  injectStyles,\n  scopeId,\n  moduleIdentifier /* server only */,\n  shadowMode /* vue-cli only */\n) {\n  // Vue.extend constructor export interop\n  var options =\n    typeof scriptExports === 'function' ? scriptExports.options : scriptExports\n\n  // render functions\n  if (render) {\n    options.render = render\n    options.staticRenderFns = staticRenderFns\n    options._compiled = true\n  }\n\n  // functional template\n  if (functionalTemplate) {\n    options.functional = true\n  }\n\n  // scopedId\n  if (scopeId) {\n    options._scopeId = 'data-v-' + scopeId\n  }\n\n  var hook\n  if (moduleIdentifier) {\n    // server build\n    hook = function (context) {\n      // 2.3 injection\n      context =\n        context || // cached call\n        (this.$vnode && this.$vnode.ssrContext) || // stateful\n        (this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext) // functional\n      // 2.2 with runInNewContext: true\n      if (!context && typeof __VUE_SSR_CONTEXT__ !== 'undefined') {\n        context = __VUE_SSR_CONTEXT__\n      }\n      // inject component styles\n      if (injectStyles) {\n        injectStyles.call(this, context)\n      }\n      // register component module identifier for async chunk inferrence\n      if (context && context._registeredComponents) {\n        context._registeredComponents.add(moduleIdentifier)\n      }\n    }\n    // used by ssr in case component is cached and beforeCreate\n    // never gets called\n    options._ssrRegister = hook\n  } else if (injectStyles) {\n    hook = shadowMode\n      ? function () {\n          injectStyles.call(\n            this,\n            (options.functional ? this.parent : this).$root.$options.shadowRoot\n          )\n        }\n      : injectStyles\n  }\n\n  if (hook) {\n    if (options.functional) {\n      // for template-only hot-reload because in that case the render fn doesn't\n      // go through the normalizer\n      options._injectStyles = hook\n      // register for functional component in vue file\n      var originalRender = options.render\n      options.render = function renderWithStyleInjection(h, context) {\n        hook.call(context)\n        return originalRender(h, context)\n      }\n    } else {\n      // inject component registration as beforeCreate hook\n      var existing = options.beforeCreate\n      options.beforeCreate = existing ? [].concat(existing, hook) : [hook]\n    }\n  }\n\n  return {\n    exports: scriptExports,\n    options: options\n  }\n}\n"],"names":[],"sourceRoot":""}